package com.team14.chatbot.service.RagServiceImpl.generator;

import com.team14.chatbot.service.RagServiceImpl.GenerationService;
import org.springframework.ai.chat.client.ChatClient;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.stereotype.Service;

@Service

public class GenerationServiceImplHuy {

    private final ChatClient gemini_2_5_pro;
    private final ChatClient qwen_2_5_3b;

    public GenerationServiceImplHuy(
            @Qualifier("gemini_2_5_pro") ChatClient gemini_2_5_pro,
            @Qualifier("qwen_2_5_3b") ChatClient qwen_2_5_3b
    ) {
        this.gemini_2_5_pro = gemini_2_5_pro;
        this.qwen_2_5_3b = qwen_2_5_3b;
    }
  //  @Override
    public String generate(GenerationRequest request) {

        ChatClient chatClient;
        Model model = Model.GEMINI_2_5_PRO;

        switch (model) {
            case GEMINI_2_5_PRO:
                chatClient = gemini_2_5_pro;
                break;
            case QWEN2_5_3_B:
                chatClient = qwen_2_5_3b;
                break;
            default:
                chatClient = gemini_2_5_pro;
        }
        return chatClient.prompt(request.getQuery()).call().content();
    }


}
